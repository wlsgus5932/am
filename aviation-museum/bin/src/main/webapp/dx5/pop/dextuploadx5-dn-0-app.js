var svgh=new SVGHelper;var active=false;var hostId="";var setLang=false;var root=null;var main=null;var pinfo=null;var winfo=null;var txtSendSize=null;var txtTotalSize=null;var txtPercent=null;var txtRemainTime=null;var txtSpeed=null;var txtAt=null;var txtName=null;var bar=null;var title=null;var twait=null;function updateUILayout(){var s=root.getComputedSize();if(s.w>0||s.h>0){main.updateLayout(s.w,s.h)}}function progress(t){var status=t.getDownloadStatus();bar.att("width",status.totalRate+"%");if(status.totalRate<=100){bar.att("fill","#03A9F4");pinfo.css("display","block");winfo.css("display","none");txtSpeed.replaceText(""+getFriendlySpeed(status.totalSpeed,2));txtPercent.replaceText(""+status.totalRate);txtSendSize.replaceText(""+getFriendlySize(status.totalReceiveSize));txtTotalSize.replaceText(""+getFriendlySize(status.totalSize));txtRemainTime.replaceText(""+msecToTimeFormat(status.remainedTotalTime));txtAt.replaceText(""+status.currentName);txtName.replaceText(""+status.currentName)}if(status.totalRate>=100){setTimeout(function(){bar.att("fill","#4CAF50");pinfo.css("display","none");winfo.css("display","block");txtAt.replaceText("");txtName.replaceText("");active=false},100)}else if(active&&status.totalRate<100){setTimeout(function(){progress(t)},100)}}document["stopUI"]=function(lazy){if(lazy){return!active}else{active=false;return true}};document["updateUI"]=function(t){if(!setLang){var rb=t.getResourceBundle();title.replaceText(rb.get("RB-POPDN-0-0001","_파일을 다운로드하는 중 입니다."));twait.replaceText(rb.get("RB-POPDN-0-0002","_마무리 작업을 대기하고 있습니다."));setLang=true}updateUILayout();active=true;hostId=t.domObject.id;progress(t)};function onLoadHandler(_evt){root=svgh.getAsUnit("UIC-DEXTUPLOADX5-PROGRESSIVE");main=svgh.getAsUnit("UIC-MAIN-AREA");pinfo=svgh.getAsUnit("UIC-PROGRESS-INFO");winfo=svgh.getAsUnit("UIC-WAIT-INFO");txtSendSize=svgh.getAsUnit("UIC-TXT-TOTAL-SEND");txtTotalSize=svgh.getAsUnit("UIC-TXT-TOTAL-SIZE");txtPercent=svgh.getAsUnit("UIC-TXT-TOTAL-PERCENTAGE");txtRemainTime=svgh.getAsUnit("UIC-TXT-TOTAL-RTIME");txtSpeed=svgh.getAsUnit("UIC-TXT-TOTAL-SPEED");txtAt=svgh.getAsUnit("UIC-AT-FILENAME");txtName=svgh.getAsUnit("UIC-TXT-FILENAME");bar=svgh.getAsUnit("UIC-PROGRESS-BAR");title=svgh.getAsUnit("UIC-TITLE-TXT");twait=svgh.getAsUnit("UIC-TXT-WAIT");svgh.getAsUnit("UIC-TITLE-BTN-CANCEL").bind("click",function(evt){evt.stopPropagation();evt.preventDefault();active=false;if(window.parent.dx5){window.parent.dx5.hideDownloadProgress(hostId,true);hostId=""}},false);updateUILayout();console.log("DX5: dextuploadx5-dn-0 loaded")}